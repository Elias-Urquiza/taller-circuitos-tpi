* Z:\home\tomi\FIUBA shared\Taller de Diseño de Circuitos Electronicos\repo\taller-circuitos-tpi\Simulaciones\IT_WORKS_Prueba_Regulador_lineal_universal_LDO_A_corriente.asc
RL V2s 0 {RL}
VIN Vpos 0 6.35
R1f V2s retro 1.5k
R2f retro 0 {RF}
Rs V2s V1s {Ri}
R2 V1s N004 1.15K
R3 N004 0 46k
R4 V2s N001 1.15K
R5 Vs N001 46k
Rx1 ref_in Vref 5k
Ry1 0 ref_in 536
Ra1 retro_in retro 115k
Rb1 0 retro_in 845k
R6 N013 ref_out 2k
R7 N013 retro_out 2k
R8 N014 0 2k
R9 Vref-c N014 2k
R10 N003 0 1k
R11 N003 Vs 1k
R12 N006 Vref-c 2k
R13 N005 N006 2k
Q2 N011 N011 N009 0 BC558B
Q3 N002 N011 N010 0 BC558B
Q4 N011 retro N017 0 BC548B
Q5 N002 Vref N017 0 BC548B
R1 Vpos N009 {RE}
R14 Vpos N010 {RE}
R15 Vpos N016 1k
Q6 N016 N016 0 0 BC548B
Q7 N017 N016 0 0 BC548B
M1 V1s N002 Vpos Vpos irf9540npbf
V2 Vref 0 2.5
Q1 N002 N012 Vpos 0 BC558B
Q8 N012 Vopamp 0 0 BC548B
R17 Vpos N012 100k
L1 Vopamp N005 10000
C1 Vopamp N008 1
V1 N008 0 AC 1
C2 V2s N015 2.2µ
C3 N007 N002 33p
R16 V2s N007 80
C4 Vpos N002 150p
C5 V2s retro 470p
R18 N015 0 0.3
C6 N012 P001 90p
R19 P001 N002 50
XU1 N004 N001 Vpos 0 Vs TLV247xA
XU2 ref_in ref_out Vpos 0 ref_out TLV247xA
XU3 retro_in retro_out Vpos 0 retro_out TLV247xA
XU4 N013 N014 Vpos 0 Vref-c TLV247xA
XU5 N003 N006 Vpos 0 N005 TLV247xA
.model NPN NPN
.model PNP PNP
.lib C:\users\tomi\My Documents\LTspiceXVII\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\tomi\My Documents\LTspiceXVII\lib\cmp\standard.mos
.op
* .dc VIN 6 6.5
* .step param RL 500 5 5
.MODEL irf9540npbf PMOS LEVEL=1 IS=1e-32  L=100u W=100u VTO=-3.74034 LAMBDA=0.00254531 KP=6.90462 CGSO=1.15995e-05 CGDO=1e-11
* .param RL=500
* Regulación de carga:
* Regulación de linea:\nVREG 6,25V a 6,45V
* .step param RL list 5 10 250 500
.param RF=1.5k
* Punto de operación
* .meas DC Vo2rl FIND V(Vo) AT=6.45\n.meas DC Vo1rl FIND V(Vo) AT=6.25\n.meas DC RegLin PARAM ((Vo2rl-Vo1rl)/12)
* 5V
* 3.3V
* .step param RL 326 3.3 3.3
* .meas OP Vo1rc FIND V(Vo) AT 326\n.meas OP Vo2rc FIND V(Vo) AT 6.6\n.meas OP Io1rc FIND I(RL) AT 326\n.meas OP Io2rc FIND I(RL) AT 6.6\n.meas OP RegCar PARAM (-(Vo2rc-Vo1rc)/(Io2rc-Io1rc))
* Mido eficiencia
* .meas OP Eficiencia PARAM -100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
* Mido regulacion de carga
* Variación carga
* __________________________________________________\n|Tension  |   RF        |  Carga 1A a 20 mA  |  Carga 0.5A a 10mA |\n_____________________________________________________\n|   5   V    |   1.18k   |       5   a 250            |        10   a 500         |\n|  3.3 V    | 3.67k   |      3.3 a 163             |        6.6  a 326         |
* .step param RL list 3.3 6.6 163 326
* .meas DC Eficiencia PARAM -100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
.param Ri=0.1
* .step param RL 0.06 6.6 0.06
* Realimentador De Corriente / Foldback:
* Sensado Corriente
* Realim para los limites del LDO_B
* Sumador:
* Amplificador de Error
.lib opamp.sub
* .step param RG 1k 5k 100
.param RE=1k
#MODELO TRANSISTORES CASA
.model BC558B PNP(Is=1.02f Xti=3 Eg=1.11 Vaf=52.31 Bf=306.5 Ise=10.27f Ne=1.764 Ikf=91.85m Nk=.5351 Xtb=1.5 Br=6.48 Isc=1.472f Nc=1.294 Ikr=.5584 Rc=1.086 Cjc=9.81p Mjc=.332 Vjc=.4865 Fc=.5 Cje=30p Mje=.3333 Vje=.5 Tr=10n Tf=611.6p Itf=1.373 Xtf=26.05 Vtf=10 Vceo=30 Icrating=100m mfg=Philips)
.model BC548B NPN(Is=7.049f Xti=3 Eg=1.11 Vaf=62.79 Bf=374.6 Ise=68f Ne=1.576 Ikf=81.57m Nk=.4767 Xtb=1.5 Br=1 Isc=12.4f Nc=1.835 Ikr=3.924 Rc=.9747 Cjc=5.25p Mjc=.3147 Vjc=.5697 Fc=.5 Cje=11.5p Mje=.6715 Vje=.5 Tr=10n Tf=410.2p Itf=1.491 Xtf=40.06 Vtf=10 Vceo=30 Icrating=100m mfg=Philips)
* .dc V1 0 2
* .param V1=1.25-3.3*0.1/{RL}
.param RL 6
* vs=2,6*Corriente
* .step param RL 0.1 10 0.1
.ac dec 10 1 1G
* .step dec param cap 1n 100u 1
* .step dec param res 10 100k 1
.lib sloj018.txt
* NO ANDA EN 6.6, TIRAR UN POCO MAS ABAJO
.param Cvar 90p
.backanno
.end
