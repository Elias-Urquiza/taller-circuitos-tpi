Version 4
SHEET 1 1580 2772
WIRE -1056 -48 -1264 -48
WIRE -640 -48 -672 -48
WIRE -192 -48 -224 -48
WIRE -752 -32 -752 -64
WIRE 256 -16 224 -16
WIRE 176 0 176 -32
WIRE 544 0 528 0
WIRE -832 16 -832 -64
WIRE -976 32 -1024 32
WIRE -864 32 -976 32
WIRE -400 32 -400 -64
WIRE -752 48 -800 48
WIRE -672 48 -672 -48
WIRE -672 48 -752 48
WIRE -640 48 -672 48
WIRE -512 48 -560 48
WIRE -432 48 -512 48
WIRE 64 48 64 -32
WIRE -1376 64 -1376 0
WIRE -864 64 -944 64
WIRE -224 64 -224 -48
WIRE -224 64 -368 64
WIRE 32 64 -224 64
WIRE 736 64 736 -16
WIRE -752 80 -752 48
WIRE -464 80 -480 80
WIRE -432 80 -464 80
WIRE 176 80 96 80
WIRE 224 80 224 -16
WIRE 224 80 176 80
WIRE 528 80 528 0
WIRE 896 80 896 0
WIRE -1168 96 -1168 16
WIRE 32 96 -48 96
WIRE -1264 112 -1264 -48
WIRE -1200 112 -1264 112
WIRE 176 112 176 80
WIRE -1056 128 -1056 -48
WIRE -1056 128 -1136 128
WIRE -1200 144 -1376 144
WIRE -672 160 -672 48
WIRE -832 176 -832 80
WIRE -752 176 -752 144
WIRE -512 176 -512 48
WIRE -400 176 -400 96
WIRE 64 208 64 112
WIRE 176 208 176 176
WIRE -1376 256 -1376 224
WIRE -1168 256 -1168 160
WIRE 528 256 528 160
WIRE 736 256 736 144
WIRE 896 256 896 160
WIRE -944 336 -944 64
WIRE -672 336 -672 240
WIRE -672 336 -944 336
WIRE -624 336 -672 336
WIRE -512 336 -512 240
WIRE -512 336 -544 336
WIRE -224 336 -224 64
WIRE -224 336 -512 336
WIRE -64 672 -128 672
WIRE -384 688 -752 688
WIRE -128 688 -128 672
WIRE -128 688 -384 688
WIRE -64 688 -64 672
WIRE -32 688 -64 688
WIRE 96 704 80 704
WIRE 192 704 96 704
WIRE -64 720 -64 688
WIRE -32 720 -64 720
WIRE -384 752 -384 688
WIRE 32 800 32 768
WIRE 192 864 192 704
WIRE 272 864 192 864
WIRE 400 880 384 880
WIRE 528 880 400 880
WIRE 544 880 528 880
WIRE -384 896 -384 832
WIRE -192 896 -384 896
WIRE -64 896 -192 896
WIRE 272 896 192 896
WIRE -64 960 -64 896
WIRE -32 960 -64 960
WIRE 336 960 336 944
WIRE 96 976 80 976
WIRE 192 976 192 896
WIRE 192 976 96 976
WIRE -64 992 -64 960
WIRE -32 992 -64 992
WIRE -384 1024 -384 896
WIRE 32 1056 32 1040
WIRE -128 1136 -128 688
WIRE 240 1136 -128 1136
WIRE 368 1152 352 1152
WIRE 512 1152 368 1152
WIRE 544 1152 512 1152
WIRE -192 1168 -192 896
WIRE 240 1168 -192 1168
WIRE -384 1216 -384 1088
WIRE 304 1232 304 1216
WIRE -832 1344 -832 1280
WIRE -832 1456 -832 1424
WIRE -64 1968 -64 1904
WIRE 80 1968 -64 1968
WIRE 208 1968 144 1968
WIRE 288 1968 208 1968
WIRE 288 2016 288 1968
WIRE -160 2064 -160 1984
WIRE -64 2064 -64 1968
WIRE 800 2064 800 1968
WIRE -240 2128 -528 2128
WIRE 208 2128 208 1968
WIRE 208 2128 16 2128
WIRE 624 2144 544 2144
WIRE 752 2144 704 2144
WIRE 288 2192 288 2080
WIRE 288 2192 16 2192
WIRE 800 2192 800 2160
WIRE 800 2192 288 2192
WIRE 1200 2192 800 2192
WIRE 1328 2192 1280 2192
WIRE 1504 2192 1328 2192
WIRE -240 2224 -528 2224
WIRE 800 2240 800 2192
WIRE 544 2256 544 2144
WIRE 544 2256 16 2256
WIRE 1328 2256 1328 2192
WIRE 1504 2256 1504 2192
WIRE -240 2320 -272 2320
WIRE 608 2320 16 2320
WIRE 752 2320 688 2320
WIRE 1328 2384 1328 2320
WIRE 1504 2384 1504 2336
WIRE -272 2416 -272 2320
WIRE -160 2416 -160 2384
WIRE -160 2416 -272 2416
WIRE -112 2416 -160 2416
WIRE -64 2416 -64 2384
WIRE -64 2416 -112 2416
WIRE -112 2464 -112 2416
WIRE 800 2528 800 2336
WIRE -704 2640 -704 2576
WIRE -528 2640 -528 2576
WIRE -704 2752 -704 2720
WIRE -528 2752 -528 2720
FLAG -384 1216 0
FLAG 336 960 0
FLAG 32 1056 0
FLAG 304 1232 0
FLAG 32 640 Vdd
FLAG 336 816 Vdd
FLAG 32 912 Vdd
FLAG 304 1088 Vdd
FLAG -832 1456 0
FLAG -832 1280 Vdd
FLAG 528 880 HIN
FLAG 512 1152 LIN
FLAG 32 800 0
FLAG 528 256 0
FLAG 544 0 V+
IOPIN 544 0 BiDir
FLAG -192 -48 V_triangular1
IOPIN -192 -48 Out
FLAG -640 -48 V_cuadrada1
IOPIN -640 -48 Out
FLAG -832 -64 Vlm
FLAG -400 -64 V+
FLAG 256 -16 pwm_output
IOPIN 256 -16 Out
FLAG 64 -32 Vlm
FLAG -1168 16 V+
FLAG 64 208 0
FLAG -1376 256 0
FLAG -1376 0 V+
IOPIN -1376 0 BiDir
FLAG -1056 -48 ref1
FLAG -976 32 ref1
FLAG -464 80 ref1
FLAG -400 176 0
FLAG -832 176 0
FLAG -1168 256 0
FLAG -48 96 ref2
FLAG 176 208 0
FLAG 176 -32 V+
FLAG 896 256 0
FLAG 896 0 Vlm
FLAG -752 176 0
FLAG -752 -64 V+
FLAG -752 688 pwm_output
IOPIN -752 688 In
FLAG -384 896 pwm_delay
FLAG 736 256 0
FLAG 736 -16 ref2
FLAG -528 2128 HIN
FLAG -528 2224 LIN
FLAG -112 2464 0
FLAG 800 1968 Vin
FLAG 800 2528 0
FLAG 1328 2384 0
FLAG 1504 2384 0
FLAG -160 1984 Vdd
FLAG -704 2752 0
FLAG -528 2752 0
FLAG -704 2576 Vcc
FLAG -528 2576 Vin
FLAG -64 1904 Vcc
SYMBOL res -400 736 R0
SYMATTR InstName R3
SYMATTR Value 4.7K
SYMBOL cap -400 1024 R0
SYMATTR InstName C3
SYMATTR Value 22p
SYMBOL voltage -832 1328 R0
SYMATTR InstName V1
SYMATTR Value 6
SYMBOL CD74HC02 320 880 R0
SYMATTR InstName U2
SYMBOL CD74HC02 16 976 R0
SYMATTR InstName U3
SYMBOL CD74HC02 288 1152 R0
SYMATTR InstName U4
SYMBOL CD74HC02 16 704 R0
SYMATTR InstName U1
SYMBOL voltage 528 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 50 43 VRight 2
WINDOW 3 -47 -36 VRight 2
SYMATTR InstName V3
SYMATTR Value PWL(0 0 10n 6)
SYMBOL res -544 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rb1
SYMATTR Value 200
SYMBOL res -528 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Ra1
SYMATTR Value 100
SYMBOL res -688 144 R0
SYMATTR InstName nRa1
SYMATTR Value 2k
SYMBOL cap -528 176 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL opamp2 -400 0 R0
SYMATTR InstName U5
SYMATTR Value TLV247xA
SYMBOL opamp2 64 16 R0
SYMATTR InstName U6
SYMATTR Value LM2901
SYMBOL opamp2 -1168 64 R0
SYMATTR InstName U7
SYMATTR Value TLV247xA
SYMBOL res -1392 48 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res -1392 128 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 160 -16 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL cap 160 112 R0
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL voltage 896 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(0 0 10n 10)
SYMBOL cap -768 80 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL res -768 -48 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL opamp2 -832 -16 R0
WINDOW 3 -119 -28 Left 2
SYMATTR Value LM2901
SYMATTR InstName U8
SYMBOL Voltage 736 48 R0
SYMATTR InstName V2
SYMATTR Value 3.56
SYMBOL ir2110 -176 2176 R0
SYMATTR InstName U9
SYMBOL schottky 80 1984 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 272 2016 R0
SYMATTR InstName C5
SYMATTR Value 6.3µ
SYMBOL nmos 752 2064 R0
SYMATTR InstName M1
SYMATTR Value irfz44n
SYMBOL nmos 752 2240 R0
SYMATTR InstName M2
SYMATTR Value irfz44n
SYMBOL res 704 2304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res 720 2128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL ind 1296 2176 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 330µ
SYMBOL cap 1312 2256 R0
SYMATTR InstName C6
SYMATTR Value 4.7µ
SYMBOL res 1488 2240 R0
SYMATTR InstName R8
SYMATTR Value 63.5
SYMBOL voltage -704 2624 R0
SYMATTR InstName Vcc
SYMATTR Value 10
SYMBOL voltage -528 2624 R0
SYMATTR InstName Vin
SYMATTR Value 12
TEXT -768 1136 Left 2 ;.tran 7.5u
TEXT -304 1312 Left 2 !.include CD74HC02.cir
TEXT -1392 312 Left 2 !.tran 0 5m 0 2n
TEXT -1392 352 Left 2 !.lib sloj018.txt
TEXT -1392 384 Left 2 !.lib LM2901.lib
TEXT -64 280 Left 2 !.meas tran T_rise WHEN V(out)=3 RISE=1\n.meas tran T_fall WHEN V(out)=3 RISE=2\n.meas tran PulseWidth PARAM T_fall - T_rise
TEXT -304 1400 Left 2 !.include irfz44n.spi
TEXT -56 408 Left 2 !.options abstol=1e-10\n.options reltol=0.003
